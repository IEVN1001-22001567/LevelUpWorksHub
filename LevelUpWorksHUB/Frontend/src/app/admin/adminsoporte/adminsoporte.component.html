<div class="min-h-screen bg-neutral-950 text-gray-200 p-6">

  <!-- TÍTULO -->
  <h1 class="text-4xl font-bold text-yellow-400 text-center mb-10">
    Gestión de Soporte <span class="text-red-500 text-sm bg-neutral-800 px-2 py-1 rounded">ADMIN</span>
  </h1>

  <!-- ESTADÍSTICAS -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 max-w-6xl mx-auto mb-10">

    <div class="bg-neutral-900 border border-neutral-700 rounded-xl p-6 text-center shadow-lg">
      <p class="text-gray-400">Abiertos</p>
      <p class="text-3xl font-bold text-blue-400">{{ stats.abiertos }}</p>
    </div>

    <div class="bg-neutral-900 border border-neutral-700 rounded-xl p-6 text-center shadow-lg">
      <p class="text-gray-400">En Proceso</p>
      <p class="text-3xl font-bold text-yellow-400">{{ stats.enProceso }}</p>
    </div>

    <div class="bg-neutral-900 border border-neutral-700 rounded-xl p-6 text-center shadow-lg">
      <p class="text-gray-400">Resueltos</p>
      <p class="text-3xl font-bold text-green-400">{{ stats.resueltos }}</p>
    </div>

    <div class="bg-neutral-900 border border-neutral-700 rounded-xl p-6 text-center text-red-500 shadow-lg">
      <p class="text-gray-400">Alta Prioridad</p>
      <p class="text-3xl font-bold">{{ stats.alta }}</p>
    </div>

  </div>

  <!-- FILTROS -->
  <div class="flex flex-wrap justify-center gap-4 mb-10">
    <button class="px-5 py-2 rounded-lg bg-neutral-800 border border-neutral-600 hover:border-yellow-400"
            (click)="filtro='Todos'">Todos</button>

    <button class="px-5 py-2 rounded-lg bg-blue-900/40 border border-blue-400 text-blue-300"
            (click)="filtro='Abierto'">Abiertos</button>

    <button class="px-5 py-2 rounded-lg bg-yellow-900/40 border border-yellow-400 text-yellow-300"
            (click)="filtro='En Proceso'">En Proceso</button>

    <button class="px-5 py-2 rounded-lg bg-green-900/40 border border-green-400 text-green-300"
            (click)="filtro='Resuelto'">Resueltos</button>
  </div>

  <!-- LISTA DE TICKETS -->
  <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-6">

    <div *ngFor="let t of ticketsFiltrados()"
         class="bg-neutral-900 border border-neutral-700 rounded-xl p-5 shadow-lg hover:border-yellow-400 transition">

      <div class="flex justify-between items-center mb-2">
        <h3 class="text-lg font-semibold text-yellow-400">{{ t.asunto }}</h3>
        <span class="px-3 py-1 rounded-full text-xs"
              [ngClass]="{
                'bg-blue-900 text-blue-300': t.estado === 'Abierto',
                'bg-yellow-900 text-yellow-300': t.estado === 'En Proceso',
                'bg-green-900 text-green-300': t.estado === 'Resuelto'
              }">
          {{ t.estado }}
        </span>
      </div>

      <p class="text-gray-400 mb-3">{{ t.descripcion }}</p>

      <div class="text-sm text-gray-500 mb-4">
        <p><span class="text-gray-300">Correo: </span>{{ t.correo }}</p>
        <p><span class="text-gray-300">Fecha: </span>{{ t.fecha_creacion | date:'short' }}</p>
      </div>

      <div class="flex justify-end gap-3">
        <button class="bg-yellow-500 px-4 py-1 rounded text-black font-bold"
                (click)="abrirModalEditar(t)">Editar</button>

        <button class="bg-red-600 px-4 py-1 rounded text-white font-bold"
                (click)="eliminarTicket(t.id_ticket)">Eliminar</button>
      </div>
    </div>

  </div>

  <!-- MODAL EDITAR -->
  <div *ngIf="modalEditar" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div class="bg-neutral-900 border border-yellow-400 rounded-xl p-6 w-full max-w-md relative">

      <button class="absolute top-3 right-3 text-red-400 text-2xl"
              (click)="modalEditar=false">✖</button>

      <h2 class="text-2xl font-bold text-yellow-400 mb-4">Editar Ticket</h2>

      <label class="text-gray-300 font-medium">Estado</label>
      <select class="w-full p-2 rounded bg-neutral-800 text-gray-200 border border-neutral-600 mb-5"
              [(ngModel)]="ticketEditando.estado">

        <option>Abierto</option>
        <option>En Proceso</option>
        <option>Resuelto</option>

      </select>

      <button class="bg-yellow-500 px-4 py-2 rounded font-bold text-black w-full"
              (click)="guardarCambios()">Guardar</button>

    </div>
  </div>

</div>
